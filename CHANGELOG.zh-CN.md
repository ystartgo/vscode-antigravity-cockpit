# 更新日志

简体中文 · [English](CHANGELOG.md) · [繁體中文](CHANGELOG.zh-TW.md)

本文件记录 Antigravity Cockpit 扩展的所有重要变更。

格式参考 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)。

---

## [1.5.12] - 2025-12-17

### 修复
- **状态颜色**：状态球颜色调整回更鲜艳的色调（使用终端/图表高亮色，替代较暗的图标色）

---

## [1.5.11] - 2025-12-16

### 新增
- **名称+数字模式**：新增状态栏格式 `Sonnet: 95%`（不带状态球）

### 变更
- **状态栏选择器**：从按钮组改为下拉框，界面更简洁
- **设置标题**：从"提醒设置"简化为"设置"
- **设置自动保存**：所有设置立即生效，无需手动保存
- **阈值自动调整**：超出范围的值自动调整为有效值

### 修复
- **设置弹框保持**：数据自动刷新时弹框不再关闭

---

## [1.5.1] - 2025-12-16

### 新增
- **重置名称按钮**：重命名弹框新增"重置"按钮，可快速恢复原始名称

### 修复
- **状态栏同步**：自定义模型名称现在会正确显示在状态栏中（非分组模式）

### 改进
- **主题适配**：使用 VS Code 主题变量适配颜色（Tooltip、语义色、标签等）

---

## [1.5.0] - 2025-12-16

### 新增
- **模型重命名**：在非分组模式下可以重命名单个模型（点击模型卡片上的 ✏️ 图标）
- **状态栏样式选择器**：在设置面板中提供 5 种状态栏显示模式
  - 仅图标（`🚀`）
  - 仅状态球（`🟢` | `🟡` | `🔴`）
  - 仅数字（`95%`）
  - 状态球+数字（`🟢 95%`）
  - 完整显示（`🟢 Sonnet: 95%`）- 默认

### 变更
- 设置面板新增状态栏样式选择器，支持实时预览
- 自定义模型名称跨会话持久化保存

---

## [1.4.24] - 2025-12-15

### 变更
- QuickPick 模式：使用 Emoji 图标，确保在所有主题下始终可见

---

## [1.4.23] - 2025-12-15

### 新增
- QuickPick 模式：添加「切换到 Webview 模式」按钮，方便切换显示模式

---

## [1.4.22] - 2025-12-15

### 新增
- QuickPick 兼容模式：使用 VSCode 原生 QuickPick API 替代 Webview
- 更好兼容 Webview 不受支持的环境
- 通过 `agCockpit.displayMode: "quickpick"` 配置启用
- 功能：查看所有模型配额、切换状态栏固定、刷新数据
- Webview 加载失败时自动引导用户切换到 QuickPick 模式

---

## [1.4.21] - 2025-12-15

### 变更
- 文档：拆分中英文 README 与更新日志，并加入语言切换链接
- 文档：以 Open VSX 徽章/链接作为主要分发渠道

---

## [1.4.20] - 2025-12-15

### 修复
- 修复启动时服务未就绪（500 错误）导致的 `Cannot read properties of undefined` 崩溃问题
- 添加服务器响应验证，提供更清晰的错误信息

### 新增
- 启动时自动重试机制：首次同步失败会自动重试最多 3 次

---

## [1.4.19] - 2025-12-13

### 安全
- 诊断日志中的敏感信息（csrf_token）脱敏处理，防止信息泄露

---

## [1.4.18] - 2025-12-13

### 新增
- 创建独立的 `CHANGELOG.md` 文件，记录所有历史版本更新

### 变更
- README 中的 Changelog 章节改为引用独立文件
- 移除冗余的 `activationEvents` 配置（VS Code 自动生成）

---

## [1.4.17] - 2025-12-13

### 新增
- 启动日志中显示插件版本号，方便问题排查

---

## [1.4.16] - 2025-12-13

### 修复
- 优化进程识别逻辑，精准匹配 Antigravity 进程
- 避免误识别 Windsurf 等其他编辑器进程
- 强制要求 `--app_data_dir antigravity` 参数或路径包含 `antigravity`

---

## [1.4.15] - 2025-12-13

### 修复
- 修复所有 ESLint 错误（23 个错误 → 0）
- 将 `require()` 改为 ES6 动态 `import()`
- 为 case 块添加花括号作用域
- 修复 TypeScript `any` 类型警告

### 改进
- 增强 Windows 进程检测容错性
- 添加 PowerShell/WMIC 双向自动切换机制
- 添加切换次数限制防止无限循环
- PowerShell 冷启动等待时间从 1秒 增加到 2秒
- 检测 PowerShell 执行策略和 WMI 服务问题
- 增强诊断信息，提供用户友好的故障排除提示

---

## [1.4.14] - 2025-12-12

### 修复
- 修复多进程场景下的进程检测问题
- 改进进程验证逻辑

---

## [1.4.13] - 2025-12-12

### 变更
- 分组重命名改用模态框输入
- 移除仪表盘中的"最后更新时间"显示

---

## [1.4.12] - 2025-12-12

### 修复
- 修复 PowerShell 冷启动超时问题
- 增加进程命令执行超时时间至 8 秒

---

## [1.4.11] - 2025-12-12

### 变更
- 版本号整理

---

## [1.4.1] - 2025-12-11

### 新增
- 添加阈值通知开关，支持用户控制是否弹窗提醒

### 修复
- 修复通知开关状态未正确传递到前端的问题
- 修复点击状态栏和刷新缓存时阈值颜色判断错误的问题

---

## [1.4.0] - 2025-12-11

### 新增
- 可配置的警告/危险阈值
- 快捷键支持（查看日志、打开仪表盘等）
- 反馈入口（GitHub Issues）
- 阈值通知功能

### 改进
- 优化配额判断逻辑
- 统一颜色显示标准

---

## [1.3.14] - 2025-12-10

### 新增
- 添加备用关键字搜索（通过 `csrf_token` 查找进程）

### 修复
- 修复 PowerShell 引号转义问题

---

## [1.3.12] - 2025-12-08

### 修复
- 修正仪表盘状态逻辑
- 完善国际化支持
- Tooltip 中使用完整模型名称

---

## [1.3.1] - 2025-12-07

### 新增
- 状态栏彩色指示器（🟢🟡🔴）
- 统一的三色状态逻辑

### 改进
- 精度修复
- 工具提示模型顺序与仪表盘一致

---

## [1.3.0] - 2025-12-07

### 新增
- Tooltip 对齐优化
- 统一阈值配置
- 自动重试机制

---

## [1.2.16] - 2025-12-06

### 新增
- 首次切换到分组模式时自动分组

---

## [1.2.15] - 2025-12-06

### 新增
- 手动自动分组功能
- 持久化分组映射

---

## [1.2.13] - 2025-12-05

### 修复
- 确保自动置顶在 UI 刷新前执行

---

## [1.2.12] - 2025-12-05

### 修复
- 使用基于模型 ID 的稳定 groupId

---

## [1.2.11] - 2025-12-05

### 修复
- 多项改进和错误修复

---

## [1.2.1] - 2025-12-04

### 修复
- 首次启用分组时自动置顶所有分组

---

## [1.2.0] - 2025-12-04

### 新增
- 配额分组功能
- 分组自定义名称
- 分组拖拽排序
- 分组状态栏显示

---

## [1.1.153] - 2025-12-03

### 新增
- 使用趋势图可见性切换

---

## [1.1.152] - 2025-12-03

### 新增
- 配额历史图表（7 天数据保留）

---

## [1.1.151] - 2025-12-02

### 改进
- 简化用户资料控制
- 数据掩码改用文本按钮
- 可见性切换移至头部

---

## [1.1.150] - 2025-12-02

### 新增
- 用户资料可见性切换
- 敏感数据掩码功能

---

## [1.1.149] - 2025-12-02

### 新增
- 隐私模式
- 用户资料可见性切换

---

## [1.1.148] - 2025-12-01

### 修复
- 移除 Prompt Credits 设置
- 配置变更时自动更新状态栏

---

## [1.1.147] - 2025-12-01

### 修复
- 连接失败时自动重新扫描

---

## [1.1.146] - 2025-11-30

### 修复
- 状态栏错误状态未清除的问题

---

## [1.1.144] - 2025-11-30

### 变更
- 将"User ID"重命名为"Internal Tier ID"

---

## [1.1.143] - 2025-11-29

### 新增
- 详细用户资料字段本地化

---

## [1.1.142] - 2025-11-29

### 改进
- 上下文窗口逻辑移至固定区域

---

## [1.1.14] - 2025-11-28

### 新增
- 完整的用户资料详情
- 状态持久化

---

## [1.1.13] - 2025-11-27

### 改进
- 优化 UI 交互
- 修复置顶切换功能

---

## [1.1.12] - 2025-11-27

### 改进
- 增强调试日志
- 优化刷新行为

---

## [1.1.11] - 2025-11-26

### 修复
- 使用向下取整百分比，避免误导性的 100%

---

## [1.0.0] - 2025-11-25

### 新增
- 首次发布 🎉
- 沉浸式仪表盘
- 精确定时刷新
- 交互式控制（拖拽排序、置顶模型）
- 智能状态栏
- 智能通知
- 中英文双语支持
- 跨平台支持（Windows / macOS / Linux）

